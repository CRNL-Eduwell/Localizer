\documentclass[a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{listings}
\usepackage{graphicx}
\usepackage{dirtree}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{float}
\usepackage[english]{babel}
\usepackage[margin=1.1in]{geometry}
\title{Localizer User Manual}
\author{\textsc{SIPP Florian}}
\lstset{
	frame = single,
	basicstyle = \footnotesize\ttfamily
}

\begin{document}
\maketitle
\begin{abstract}
This document is the user manual of the Software Localizer. Localizer is being developed by the Centre de Recherche en Neurosciences de Lyon (CRNL) to allow the quick analysis of data recovered during Localizer tasks performed by iEEG patients before their possible surgery due to drug resistant epilepsy.  Localizer is also the term used to define a set of tasks requiring the use of specific cognitive abilities. Those tasks will allow the researcher or the clinician to check for indications of epileptic activity in specific areas of the brain. 
\end{abstract}
\tableofcontents

\newpage
\section{Cognitive Tasks} \label{cognitivetasks}    
\subsection{Auditiv Task} \label{locaaudi}   
\paragraph{} The subject listens, eyes closed, different types of sounds (voices, city noises, animals) lasting 12 seconds with a pause of 3 second beetween each sound.  This is an activ listenning task because at the end of the experiment,  sounds will be presented and the subject will have to say if he heard them during the experiment or not.
\paragraph{}
Codes of each categories :

\begin{itemize}
\item Parol : 1 - Story in French
\item Rever : 2 - Story in French but in reverse
\item Suomi : 3 - Finnish
\item Alpha : 4 - Stereotypical lists like the alphabet
\item Human : 5 - Vocal noises, without language
\item Pleur : 6 - Tears
\item Rires : 7 - Laughs
\item Yawny : 8 - Yawning
\item Cough : 9 - Coughing noises
\item Music : 10 - Music : modern, jazz, classical
\item Envir : 11 - Environnement noises, machines
\item Animo : 12 - Animals noises
\item Silen : 20 - Absolute silence
\item Button : 51 - Button press
\item Pause : 100 - Rest, eyes closed
\item Beginning Sound : 100 + code (ex : 101 = beginning of Story in French)
\end{itemize}

\subsection{Lecture 1 Task} \label{localec1}   
\paragraph{} The subject sees string of character appearing on the screen in cluster of 5. There is three types of group : words, pseudowords and non pronouncable strings. 
\paragraph{}
For the words, the subject has to say if this is something alive or not (Button 1 = alive) .
For the pseudowords, the subject has to say if they have 2 syllables or only one by pronouncing it mentally (Button 1 = 2 syllables).
For the strings,  the subject has to say if they are in Uppercase or lowercase (Button 1 = Uppercase). 
\paragraph{} 
There is 3 rest period including one at the end. 
The placement of the string is a reminder of the task to perform (up = words, middle = pseudowords, bottom = strings).
\paragraph{} Before each trial, the row where the stimulus will appear will become lighter in color so that the subject is abble to prepare for the task to come.
\paragraph{} Every 5 stimuli we will alternate the task to perform.

\paragraph{}
Codes of each categories :

\begin{itemize}
\item Words : 10 - True Words
\item Pseudo : 20 - Pseudo-words
\item Strings : 30 - Strings of consonants
\item Pause : 100 - Rest, eyes closed
\item Instruction for Words : 15 - Beginning of the true words
\item Instruction for Pseudowords : 25 - Beginning of the pseudo-words
\item Instruction for Strings : 35 - Beginning of the consonnants
\item Response Button Yes : 1 - Yes (alive, 2 syllables, Uppercase)
\item Response Button No : 2 - No (not alive, 1 syllable, Lowercase)
\item Cut : 99 - Rest, eyes closed
\item Feedback 0 : 110 - 0 good answers out of 5
\item Feedback 1 : 111 - 1 good answers out of 5
\item Feedback 2 : 112 - 2 good answers out of 5
\item Feedback 3 : 113 - 3 good answers out of 5
\item Feedback 4 : 114 - 4 good answers out of 5
\item Feedback 5 : 115 - 5 good answers out of 5
\end{itemize}

\subsection{Lecture 2 Task} \label{localec2}   
\paragraph{} The subject sees words appearing briefly on the screen.  He has to read a story written in gray and not pay attention to the story written in white. 
The story to read is darker in shade to prevent the attentional effect being misjudged for a contrast effect. 
\paragraph{}
Codes of each categories :

\begin{itemize}
\item Target Words : 10 - Story in grey 
\item Non Target Words : 20 - Story in white
\end{itemize}

\subsection{Verbal Working Memory Task} \label{locamveb}   
\paragraph{} This is a Sternberg type task. The subject sees strings of 6 characters appearing on the screen, some are letters, some are characters {\#}. He needs to read those letters and memorise them. After three seconds,  another letter appears and the subject has to say if this letters was part of the inital display that he had to memorise.

In the control task,  the letters to memorise are identical.

\paragraph{}
Codes of each categories :

\begin{itemize}
\item Strings of N letters : N * 10 - (20 is 2 letters to memorise ) Onset of the letter stimulus 
\item Control : N * 10 + 1 - N is the nnumber of identical letters in the control
\item Pause : 100 - Rest, eyes closed
\item Maintenance during memory storage : N * 10 + 5 - 1000, 1500, 2000 from onset,  three pulses
\item Maintenance during control  : 90 - 1000, 1500, 2000 from onset,  three pulses
\item End of test : 99
\item Response Button : 1 - Yes the letter was part of the list
\item Response Button : 2 - No the letter was not part of the list
\item Positiv Feedback : 101 - Happy Penguin
\item Negativ Feedback : 102 - Sad Penguin 
\end{itemize}

\subsection{Visual Spatial Working Memory Task} \label{locamvis}   
\paragraph{} The subject sees rounds appearing in a grid on the screen. He needs to memorize the position of those points during three seconds after they disapear from the grid.  After this delay, a point appears in one the cell of the grid and the subject has to say wether this position was occupied previously by one the points or not.

In the control task, there is only one point to memorise and the subject can look only at these cell. He just needs to wait to signal if there is a point appearing in the cell or not.

\paragraph{}
Codes of each categories :

\begin{itemize}
\item Shape of N points : N * 10 - (20 is 2 points to memorise ) Onset of the point stimulus 
\item Control : N * 10 + 1 - N is the nnumber of identical points in the control
\item Pause : 100 - Rest, eyes closed
\item Maintenance during memory storage : N * 10 + 5 - 1000, 1500, 2000 from onset,  three pulses
\item Maintenance during control  : 90 - 1000, 1500, 2000 from onset,  three pulses
\item End of test : 99
\item Response Button : 1 - Yes the point was inside one of the cells
\item Response Button : 2 - No the point was not inside one of the cells
\item Positiv Feedback : 101 - Happy Penguin
\item Negativ Feedback : 102 - Sad Penguin 
\end{itemize}

\subsection{Visual Task} \label{locavisu}   
\paragraph{} The subject sees images being displayed on the screen, he has to press a button when he sees a FRUIT (this an odball task). The images are being displayed by series of five, with some time to blink beetween two sets.
\paragraph{}
Codes of each categories :

\begin{itemize}
\item Houses : 10
\item Faces : 20
\item Animals : 30
\item Scenes : 40
\item Objects : 50
\item Pseudo-words : 60
\item String of consonants : 70
\item Fruits (target) : 80
\item Scrambled : 90
\item Pause : 100
\item Cut : 99
\item Baseline fix : 110
\item Beginning of blink period : 111
\end{itemize}

\newpage
\section{Data Curation} \label{curation}    
\paragraph{} In order to get the most of Localizer you can organize your data in several ways which are going to be described.
\subsection{Subject Folder organisation} \label{subjectfolderorganisation}   
\begin{figure}[H]
\framebox[\textwidth]{%
\begin{minipage}{0.9\textwidth}
\dirtree{%
	.1 HOSPITAL{\_}YEAR{\_}PATID/.
	.2 HOSPITAL{\_}YEAR{\_}PATID{\_}TASK1/.
	.3 HOSPITAL{\_}YEAR{\_}PATID{\_}TASK1.TRC.
	.3 ....
	.2 HOSPITAL{\_}YEAR{\_}PATID{\_}TASK2/.
	.3 HOSPITAL{\_}YEAR{\_}PATID{\_}TASK2.TRC.
	.3 ....
	.2 HOSPITAL{\_}YEAR{\_}PATID{\_}TASK3/.
	.3 HOSPITAL{\_}YEAR{\_}PATID{\_}TASK3.TRC.
}
\end{minipage}
}
\caption{\label{SubjectDirectory}Subject directory hierarchy}
\end{figure}
\subsection{Multiple Subjects Folder} \label{multiplesubjectsfolderorganisation}   
\begin{figure}[H]
\framebox[\textwidth]{%
\begin{minipage}{0.9\textwidth}
\dirtree{%
	.1 YEAR1.
	.2 HOSPITAL{\_}YEAR1{\_}PATID/.
	.3 HOSPITAL{\_}YEAR1{\_}PATID{\_}TASK1/.
	.4 HOSPITAL{\_}YEAR1{\_}PATID{\_}TASK1.TRC.
	.4 ....
	.3 HOSPITAL{\_}YEAR1{\_}PATID{\_}TASK2/.
	.4 HOSPITAL{\_}YEAR1{\_}PATID{\_}TASK2.TRC.
	.4 ....
	.3 HOSPITAL{\_}YEAR1{\_}PATID{\_}TASK3/.
	.4 HOSPITAL{\_}YEAR1{\_}PATID{\_}TASK3.TRC.
	.1 YEAR2.
	.2 HOSPITAL{\_}YEAR2{\_}PATID/.
	.3 HOSPITAL{\_}YEAR2{\_}PATID{\_}TASK1/.
	.4 HOSPITAL{\_}YEAR2{\_}PATID{\_}TASK1.TRC.
	.4 ....
	.3 HOSPITAL{\_}YEAR2{\_}PATID{\_}TASK2/.
	.4 HOSPITAL{\_}YEAR2{\_}PATID{\_}TASK2.TRC.
	.4 ....
	.3 HOSPITAL{\_}YEAR2{\_}PATID{\_}TASK3/.
	.4 HOSPITAL{\_}YEAR2{\_}PATID{\_}TASK3.TRC.
}
\end{minipage}
}
\caption{\label{MultipleSubjectsDirectory}Multiple Subjects directory hierarchy}
\end{figure}
\subsection{EEG Files Folder} \label{eegfilesfolderorganisation}   
\begin{figure}[H]
\framebox[\textwidth]{%
\begin{minipage}{0.9\textwidth}
\dirtree{%
	.1 ROOT{\_}FOLDER.
	.2 my{\_}awesome{\_}file.TRC.
	.2 file{\_}frOm{\_}Collab.eeg.
	.2 file{\_}frOm{\_}Collab.vhdr.
	.2 file{\_}frOm{\_}Collab.vmkr.
	.2 another{\_}file.edf.
}
\end{minipage}
}
\caption{\label{MiscEEGDirectory}Folder with eeg files without structure}
\end{figure}
\subsection{BIDS Subject Folder} \label{bidssubjectfolderorganisation}   
\begin{figure}[H]
\framebox[\textwidth]{%
\begin{minipage}{0.9\textwidth}
\dirtree{%
	.1 BidsDataset.
	.2 code.
	.2 dataset{\_}description.json.
	.2 derivatives.
	.2 participants.tsv.
	.2 sub-6d5ecf1a54f9.
	.3 ses-post.
	.4 anat.
	.4 ieeg.
	.5 sub-6d5ecf1a54f9{\_}ses-post{\_}task-VISU{\_}channels.tsv.
	.5 sub-6d5ecf1a54f9{\_}ses-post{\_}task-VISU{\_}events.tsv.
	.5 sub-6d5ecf1a54f9{\_}ses-post{\_}task-VISU{\_}ieeg.eeg.
	.5 sub-6d5ecf1a54f9{\_}ses-post{\_}task-VISU{\_}ieeg.json.
	.5 sub-6d5ecf1a54f9{\_}ses-post{\_}task-VISU{\_}ieeg.vhdr.
	.5 sub-6d5ecf1a54f9{\_}ses-post{\_}task-VISU{\_}ieeg.vmrk.
	.3 ses-pre.
	.4 anat.
	.4 ieeg.
	.2 sub-c5c66d0e5eca.
	.3 ses-post.
	.4 anat.
	.4 ieeg.
	.5 sub-c5c66d0e5eca{\_}ses-post{\_}task-MVIS{\_}channels.tsv.
	.5 sub-c5c66d0e5eca{\_}ses-post{\_}task-MVIS{\_}events.tsv.
	.5 sub-c5c66d0e5eca{\_}ses-post{\_}task-MVIS{\_}ieeg.eeg.
	.5 sub-c5c66d0e5eca{\_}ses-post{\_}task-MVIS{\_}ieeg.json.
	.5 sub-c5c66d0e5eca{\_}ses-post{\_}task-MVIS{\_}ieeg.vhdr.
	.5 sub-c5c66d0e5eca{\_}ses-post{\_}task-MVIS{\_}ieeg.vmrk.
	.3 ses-pre.
	.4 anat.
	.4 ieeg.
}
\end{minipage}
}
\caption{\label{BidsDirectory}Structure of folder containing BIDS formated data}
\end{figure}

\newpage
\section{Options} \label{options}    
\subsection{Localizer}
\paragraph{} This option menu will let you create .prov files. The .prov extension stands for \textbf{protocol visualization}. Typically, a Localizer is a set of time series (one for each channel) with data for each sample from the beginning to the end of the recording session. In addition,  information about the events of the experimental paradigm is stored, each event being identified using a code (e.g. an event of code 10 occured at sample 134567).
\paragraph{} The .prov file instructs Localizer on how to epoch the data based on the events. It consists of blocs which contain a list of subblocs. Each bloc or subbloc will be sorted using first their respective order and then alphabetically using their respective names.
\paragraph{} Each subbloc is centered around a specific event, called \textbf{main event}, for a specific time window (for instance, consider all events with code 10 and extract for each of them a window ranging from 200ms before to 700ms after that event). You can specify secondary events which do not interfere in the epoching. You can also set a baseline window, which is used for statistical analysis.
\paragraph{} Each bloc also has a sorting method, which is used to sort the trials obtained from the epoching according to specific conditions (code of the main event, latency of the secondary event...). The syntax used here for a condition is \textit{SUBBLOC{\_}EVENT{\_}COMMAND} where SUBBLOC is the name of the sub-bloc, EVENT the name of the event and COMMAND the sorting parameter (which can be LATENCY or CODE). You can specify multiple conditions which are separated by a semi-colon, each of which are interpreted in the order they have been written. The rest of the .prov file is straightforward: you can specify images (.png or .jpg) at specific time windows, or to associate an image to a bloc. 
\subsection{File Priority}
\paragraph{} In The case of non BIDS datasets , you might have some of your data in a specific format , let's say Micromed TRC for instance and you receive some Brainvision data . The file priority options will allow you to say , i want you to search first for Micromed data , then for Brainvision data and will allow you to deal with multiple file formats without having to go through lengthy conversion steps.
\subsection{Statistic}
\paragraph{} For each type of data representation, there will be at the same time some statistical analysis processed during the creation of the maps:

\begin{itemize}
\item a paired difference test,  more commonly known as Wilcoxon.
\item a non paired difference test,  more commonly known as Kruskall-Wallis.
\end{itemize}

For each of those test you will be abble to choose the P value that you estimate will draw out the significant value of your data as well as a choice beetween analysing your data just with the P Value or using a false discovery rate (FDR) correction.

For Kruskall-Wallis statistic, you will also have the choice to use the parameter \textbf{Bloc wise statistics},  it will [BLABLABLA revoir les mails de JP ou revoir dans le code directement ce que ca fait]
\subsection{Pictures}
\paragraph{} These options will allow you to choose the width or the height of the generated pictures. In order to keep an optimal representation, a ratio is automatically applied when you choose a custom width or heigth.

For the trial matrices you can choose an interpolation factor in order to produce maps of better quality. The bigger the ratio the longer the time it will take to generate the maps, the default value is what we feel is the best ratio beetween generation time and picture quality.
\subsection{Frequency Bands}
\paragraph{} In order to process the Hilbert Envelope of a signal you will use this window to define your bands of interest. 
For each wanted frequency band, simply add a new element and define : 
\begin{itemize}
\item Label : Name of your frequency band, it will be used in the main user interface
\item Frequency minimum : The lower bound of your frequency range of interest
\item Frequency step : The step which will be used to divide the entire range during the analysis
\item Frequency maximum : The higher bound of your frequency range of interest
\end{itemize}

\paragraph{} Let's say i want to define a High Gamma frequency range going from 50 to 150Hz with steps of 10Hz,  i will simply input :
\begin{itemize}
\item Label : Gamma
\item Frequency minimum : 50
\item Frequency step : 10
\item Frequency maximum : 150
\end{itemize}

\newpage
\section{Data Analysis} \label{analysis}    
\subsection{Hilbert Transform}
\paragraph{} The signal for each contact was first bandpass‐filtered in multiple successive 10 Hz wide frequency bands (e.g. 10 bands from [50–60 Hz] to [140–150 Hz]) using a zero phase shift no causal finite impulse filter with 0.5 Hz roll‐off. The envelope of each bandpass‐filtered signal was then computed with a standard Hilbert transform then down‐sampled to 64 Hz and divided by its means across the entire recording session and multiplied by 100, to express each value as a percentage of that mean (normalization).  

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.4]{HilbertProcessing.png}
\end{center}
\caption{\label{HilbertProcessingPicture}Hilbert Transform of raw IEEG Data.}
\end{figure}

Finally, the normalized envelope signals for each of the ten frequency band were averaged together to provide a single HFA signal. By construction, the mean value of that HFA signal across the entire recording session is equal to 100. The whole procedure is also designed to reduce the 1/f drop‐off in amplitude of the raw iEEG signals. 

\subsection{Envelope Plot}
\paragraph{} Still blabla
\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.8]{EnvelopePlots.png}
\end{center}
\caption{\label{EnvelopePlotsPicture}Gamma Band activity for each contact and each conditions during the visual task.}
\end{figure}
\subsection{Time Trials Matrices}
\paragraph{} Still blabla
\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.7]{TimeTrialsMatrice.jpg}
\end{center}
\caption{\label{TimeTrialsPicture}Gamma Band activity during the visual task.}
\end{figure}
\subsection{Correlation Maps}
\paragraph{} Still blabla
\subsection{Statistical Files}
\paragraph{} Still blabla

\newpage
\section{Tutorials} \label{tutorials}    
\subsection{Processing data from a subject folder}

\paragraph{} The first step is to click in the menu bar on \textbf{File} > \textbf{Load Subject Folder}
\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.8]{SelectLoadSubjectFolder.png}
\end{center}
\caption{\label{LoadSubjectFolder}Loading a Subject Folder.}
\end{figure}

\paragraph{} Then you need to select the root folder of a subject as described in \ref{subjectfolderorganisation}. The column will display all data inside the selected folder. You should have several folders, each with the data of a specific cognitiv task that you want to analyse. Then you just need to select the tasks you want to process.
\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.8]{SubjectFolderSelect.png}
\end{center}
\caption{\label{FolderSelectionUI}Selection of two experiments folder for analysis.}
\end{figure}

\paragraph{} Once you have selected the experiments you want to process you need to select the analysis you want to perform as well as the frequency bands in which to perform said analysis.
\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.6]{AnalysisOptions.png}
\end{center}
\caption{\label{AnalysisOptionsUI}Selection of the analysis wanted and the frequency bands.}
\end{figure}

\paragraph{} Then you can click on \textbf{Process analysis} to launch the process
\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.6]{ProcessCancel.png}
\end{center}
\caption{\label{RunAnalysisFolderUI}Launch or Cancel the analysis.}
\end{figure}

\paragraph{} At this point, the software will parse the subject folder you inputed, take the first experiment folder selected and try to open the raw data. Due to naming convention issues this part is not yet fully automated and the operator need to check that all the electrodes present are iEEG electrodes and that they have the same name from one contact to the other. 

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.6]{ConnectCleaner.png}
\end{center}
\caption{\label{ConnectCleanerFolderUI}Check that only relevant iEEG electrodes are selected.}
\end{figure}

All the electrodes that are not relevant can be unchecked at this step before processing the data. 
Before clicking on Validate, you can export the state of each checkbox by clicking on export so that if you need to reprocess your data, there is no need to uncheck the same boxes over and over again.

\paragraph{} You can check the progress of the analysis with the steps that are being displayed in the Text box at the bottom of the software interface as well as the progress bar. Then when the analysis is finished you will have all the resulting files in dedicated folders in the directories of each experiment.

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.6]{EndOfAnalysis.png}
\end{center}
\caption{\label{EndOfAnalysis}Display of the analysis done at the end of a processing.}
\end{figure}

\subsection{Processing data from a multiple subjects folder}
\paragraph{} The first step is to click in the menu bar on \textbf{File} > \textbf{Load Multiple Subjects Folder}
\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.6]{SelectLoadMultipleSubjectsFolder.png}
\end{center}
\caption{\label{LoadMultiSubjectFolder}Loading a Multiple Subjects Folder.}
\end{figure}

\paragraph{} Then you need to select the root folder of multiple subjects as described in \ref{subjectfolderorganisation}. The column will display all data inside the selected folder. You should have one or several folders,  each representing a subjectwith one or multiple cognitiv tasks. Then you just need to select the subjects you want to process.
\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.8]{MultipleSubjectsFolderSelect.png}
\end{center}
\caption{\label{MultipleSubjectsFolderSelectionUI}Selection of two subjects folder for analysis.}
\end{figure}

\paragraph{} Once you have selected the subjects you want to process you will need to select the experiments you want to reprocess. In ordrer to prevent reprocessing data already done and to account for some possible techical issues during acquisition we let the possiblity to choose what experiments we want.
\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.6]{ExperimentsChoice.png}
\end{center}
\caption{\label{MultiSubExperimentsChoiceUI}Selection of the experiments we want to process.}
\end{figure}

\paragraph{} At this point, the software will parse each subject folder you inputed, take the first experiment folder corresponding to the list of experiments you selected and try to open the raw data. Due to naming convention issues this part is not yet fully automated and the operator need to check that all the electrodes present are iEEG electrodes and that they have the same name from one contact to the other. 
\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.6]{ConnectCleanerMultiSubject.png}
\end{center}
\caption{\label{ConnectCleanerMultiSubUI}Check that only relevant iEEG electrodes are selected.}
\end{figure}

The software will process all the requiered frequency bands and experiments for one subject,  then take the next subject and prompt this window again until all the subjects and all the experiments have been processed with the requiered parameters. When the progress bar is at it's maximum everything has been processed.

\subsection{Processing data from an EEG files folder}
\paragraph{} The first step is to click in the menu bar on \textbf{File} > \textbf{Load EEG Files Folder}
\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.6]{SelectLoadEEGFolder.png}
\end{center}
\caption{\label{LoadEEGFolder}Loading a Folder with several EEG Files.}
\end{figure}

\paragraph{} Then you need to select the root folder of multiple eeg files as described in \ref{eegfilesfolderorganisation}. The column will display all the files inside the selected folder.  Then you just need to select the files you want to process.

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.8]{MiscEEGSelect.png}
\end{center}
\caption{\label{MiscFolderSelectionUI}Selection of two eeg files for Hilbert analysis.}
\end{figure}

The only analysis option available here is the Hilbert Analysis because we might not know how the data is organized inside.

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.6]{MiscAnalysisOptions.png}
\end{center}
\caption{\label{MiscAnalysisOptionsUI}Analysis options}
\end{figure}

\paragraph{} Then you can click on \textbf{Process analysis} to launch the process
\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.6]{ProcessCancel.png}
\end{center}
\caption{\label{RunAnalysisMiscUI}Launch or Cancel the analysis.}
\end{figure}

\paragraph{} At this point, the software will parse each files you inputed and try to open the raw data. Due to naming convention issues this part is not yet fully automated and the operator need to check that all the electrodes present are iEEG electrodes and that they have the same name from one contact to the other. 

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.6]{ConnectCleaner.png}
\end{center}
\caption{\label{ConnectCleanerMiscUI}Check that only relevant iEEG electrodes are selected.}
\end{figure}

All the electrodes that are not relevant can be unchecked at this step before processing the data. 
Before clicking on Validate, you can export the state of each checkbox by clicking on export so that if you need to reprocess your data, there is no need to uncheck the same boxes over and over again.

\subsection{Processing data from a BIDS subject folder}
\paragraph{} The first step is to click in the menu bar on \textbf{File} > \textbf{Load Bids Subject Folder}
\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.6]{SelectLoadBidsSubject.png}
\end{center}
\caption{\label{LoadBidsFolder}Loading a BIDS Subject Folder.}
\end{figure}

\paragraph{} Then you need to select the root folder of a bids subject as described in \ref{eegfilesfolderorganisation}. The column will display all the folders and files inside. Then you just need to select the files you want to process.

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.8]{BidsSubjectFolderSelect.png}
\end{center}
\caption{\label{BidsSubjectFolderSelectionUI}Selection of two eeg files from a Bids Subject for analysis.}
\end{figure}

\paragraph{} Once you have selected the experiments you want to process you need to select the analysis you want to perform as well as the frequency bands in which to perform said analysis.
\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.6]{AnalysisOptions.png}
\end{center}
\caption{\label{BidsSubjectAnalysisOptionsUI}Selection of the analysis wanted and the frequency bands.}
\end{figure}

\paragraph{} Then you can click on \textbf{Process analysis} to launch the process
\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.6]{ProcessCancel.png}
\end{center}
\caption{\label{RunAnalysisBidsSubjectUI}Launch or Cancel the analysis.}
\end{figure}

\paragraph{} At this point, the software will parse each of the selected eeg files and try to open the raw data. Due to naming convention issues this part is not yet fully automated and the operator need to check that all the electrodes present are iEEG electrodes and that they have the same name from one contact to the other. 

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.6]{ConnectCleaner.png}
\end{center}
\caption{\label{ConnectCleanerBidsSubjectUI}Check that only relevant iEEG electrodes are selected.}
\end{figure}

\paragraph{} You can check the progress of the analysis with the steps that are being displayed in the Text box at the bottom of the software interface as well as the progress bar. Then when the analysis is finished you will have all the resulting files in the derivatives folder of your bids dataset with dedicated folders and files named accordingly.

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.6]{BidsDerivativesAfterAnalysis.png}
\end{center}
\caption{\label{ResultBidsSubjectDerivatives}Results of analysis in BIDS organized folders.}
\end{figure}

\end{document}